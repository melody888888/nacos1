2025-01-08 00:00:07,108 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 11 to 11, cost 0 ms.

2025-01-08 00:02:35,228 INFO Node <naming_persistent_service/nacos3:7848> term 10 start preVote.

2025-01-08 00:02:36,132 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 00:02:35,228 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=10, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2025-01-08 00:02:36,138 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 00:02:36,151 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 00:02:36,151 INFO The channel nacos2:7848 has successfully established.

2025-01-08 00:02:36,151 INFO Peer nacos2:7848 is connected.

2025-01-08 00:02:36,156 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 00:02:36,156 INFO The channel nacos1:7848 has successfully established.

2025-01-08 00:02:36,156 INFO Peer nacos1:7848 is connected.

2025-01-08 00:02:36,166 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=10, granted=true.

2025-01-08 00:02:36,166 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=10.

2025-01-08 00:02:36,166 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=10, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2025-01-08 00:02:36,178 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=11, currTerm=10, because the leader nacos2:7848's lease is still valid.

2025-01-08 00:02:36,178 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=11, votedFor=nacos3:7848, cost time=12 ms

2025-01-08 00:02:36,179 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 00:02:36,182 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=11, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 00:02:36,182 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2025-01-08 00:02:36,182 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2025-01-08 00:02:36,184 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 00:02:36,191 INFO onLeaderStart: term=11.

2025-01-08 00:02:36,465 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=11, currTerm=10, because the leader nacos1:7848's lease is still valid.

2025-01-08 00:02:36,467 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=11, currTerm=10.

2025-01-08 00:02:36,468 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=10, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2025-01-08 00:02:36,471 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=11, votedFor=0.0.0.0:0, cost time=3 ms

2025-01-08 00:02:36,474 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=11, votedFor=nacos2:7848, cost time=3 ms

2025-01-08 00:02:37,487 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 11, cost 1 ms.

2025-01-08 00:24:12,456 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499993855s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 00:25:02,717 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_11.

2025-01-08 00:25:02,718 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_11.

2025-01-08 00:25:02,719 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_10.

2025-01-08 00:25:02,775 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 11 to 11, cost 0 ms.

2025-01-08 00:26:44,647 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 13 to 13, cost 1 ms.

2025-01-08 00:30:07,172 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_11.

2025-01-08 00:30:07,173 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_11.

2025-01-08 00:30:07,174 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_10.

2025-01-08 00:30:07,177 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 11 to 11, cost 0 ms.

2025-01-08 00:32:37,487 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 11, cost 1 ms.

2025-01-08 00:32:41,135 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 00:32:41,136 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 00:32:41,147 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 00:32:41,148 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 00:32:41,149 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 00:32:41,180 INFO Connection disconnected: /172.19.0.4:33642

2025-01-08 00:55:02,712 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 11 to 12, cost 0 ms.

2025-01-08 00:56:44,648 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 01:00:07,109 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 11 to 12, cost 0 ms.

2025-01-08 01:02:37,489 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 11, cost 0 ms.

2025-01-08 01:25:02,713 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 12 to 12, cost 0 ms.

2025-01-08 01:26:44,648 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 01:30:07,108 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 12 to 12, cost 1 ms.

2025-01-08 01:32:37,490 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 11, cost 0 ms.

2025-01-08 01:55:02,715 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 12 to 12, cost 0 ms.

2025-01-08 01:56:44,649 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 13 to 13, cost 1 ms.

2025-01-08 02:00:07,110 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 12 to 12, cost 1 ms.

2025-01-08 02:02:37,490 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 11, cost 0 ms.

2025-01-08 02:25:02,715 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 12 to 12, cost 0 ms.

2025-01-08 02:26:44,650 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 02:30:07,110 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 12 to 12, cost 0 ms.

2025-01-08 02:32:37,491 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 11, cost 0 ms.

2025-01-08 02:33:55,028 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=11, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2025-01-08 02:33:55,538 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=11, lastLogIncluded=0, lastLogIndex=11, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=8, type=Follower] is going to quit

2025-01-08 02:33:55,539 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=11, lastLogIncluded=0, lastLogIndex=11, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=7, type=Follower] is going to quit

2025-01-08 02:33:55,538 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2025-01-08 02:33:55,563 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 02:33:55,575 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=13, currTerm=12, granted=true, requestLastLogId=LogId [index=12, term=12], lastLogId=LogId [index=12, term=12].

2025-01-08 02:33:55,583 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=12, currTerm=11, granted=true, requestLastLogId=LogId [index=11, term=11], lastLogId=LogId [index=11, term=11].

2025-01-08 02:33:55,584 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=13, currTerm=12.

2025-01-08 02:33:55,585 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=12, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2025-01-08 02:33:55,600 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=12, currTerm=11.

2025-01-08 02:33:55,602 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=13, votedFor=0.0.0.0:0, cost time=18 ms

2025-01-08 02:33:55,604 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=12, votedFor=0.0.0.0:0, cost time=3 ms

2025-01-08 02:33:55,606 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=13, votedFor=nacos2:7848, cost time=3 ms

2025-01-08 02:33:55,607 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=12, votedFor=nacos2:7848, cost time=3 ms

2025-01-08 02:33:57,553 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=12, currTerm=11, granted=true, requestLastLogId=LogId [index=11, term=11], lastLogId=LogId [index=11, term=11].

2025-01-08 02:33:57,557 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=12, currTerm=11.

2025-01-08 02:33:57,557 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=11, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2025-01-08 02:33:57,622 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=12, votedFor=0.0.0.0:0, cost time=65 ms

2025-01-08 02:33:57,625 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=12, votedFor=nacos1:7848, cost time=3 ms

2025-01-08 02:33:57,879 INFO Node <naming_service_metadata/nacos3:7848> term 10 start preVote.

2025-01-08 02:33:57,879 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 02:33:57,879 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=10, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2025-01-08 02:33:57,880 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 02:33:57,888 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 02:33:57,889 INFO The channel nacos2:7848 has successfully established.

2025-01-08 02:33:57,889 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 02:33:57,889 INFO The channel nacos1:7848 has successfully established.

2025-01-08 02:33:57,890 INFO Peer nacos1:7848 is connected.

2025-01-08 02:33:57,890 INFO Peer nacos2:7848 is connected.

2025-01-08 02:33:57,892 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=10, granted=true.

2025-01-08 02:33:57,892 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=10.

2025-01-08 02:33:57,899 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=11, votedFor=nacos3:7848, cost time=5 ms

2025-01-08 02:33:57,899 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 02:33:57,901 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=11, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 02:33:57,901 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2025-01-08 02:33:57,902 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2025-01-08 02:33:57,904 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 02:33:57,910 INFO onLeaderStart: term=11.

2025-01-08 02:55:02,718 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_12.

2025-01-08 02:55:02,718 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_12.

2025-01-08 02:55:02,718 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_11.

2025-01-08 02:55:02,720 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 12 to 12, cost 0 ms.

2025-01-08 02:56:44,655 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_13.

2025-01-08 02:56:44,655 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_13.

2025-01-08 02:56:44,656 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_12.

2025-01-08 02:56:44,659 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 13 to 13, cost 1 ms.

2025-01-08 03:00:07,117 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_12.

2025-01-08 03:00:07,117 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_12.

2025-01-08 03:00:07,118 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_11.

2025-01-08 03:00:07,121 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 12 to 12, cost 0 ms.

2025-01-08 03:02:37,496 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_11.

2025-01-08 03:02:37,496 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_11.

2025-01-08 03:02:37,497 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_10.

2025-01-08 03:02:37,553 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 11, cost 1 ms.

2025-01-08 03:03:55,404 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 03:03:55,405 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 03:03:55,406 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 03:03:55,406 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 03:03:55,553 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 03:03:55,553 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 03:04:00,539 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 03:04:00,540 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 03:17:09,851 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499993353s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_service_metadata

2025-01-08 03:25:02,717 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 12 to 13, cost 1 ms.

2025-01-08 03:26:44,650 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 13 to 14, cost 1 ms.

2025-01-08 03:30:07,111 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 12 to 13, cost 0 ms.

2025-01-08 03:32:37,491 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 11 to 12, cost 0 ms.

2025-01-08 03:38:46,758 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=11, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2025-01-08 03:38:46,758 INFO Node <naming_persistent_service/nacos3:7848> term 12 start preVote.

2025-01-08 03:38:46,759 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 03:38:46,759 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=12, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2025-01-08 03:38:46,758 INFO Node <naming_persistent_service_v2/nacos3:7848> term 12 start preVote.

2025-01-08 03:38:46,759 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 03:38:46,759 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2025-01-08 03:38:46,759 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=11, lastLogIncluded=0, lastLogIndex=11, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=8, type=Follower] is going to quit

2025-01-08 03:38:46,759 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=12, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2025-01-08 03:38:46,759 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 03:38:46,760 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=11, lastLogIncluded=0, lastLogIndex=11, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=9, type=Follower] is going to quit

2025-01-08 03:38:46,760 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 03:38:46,776 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 03:38:46,776 INFO The channel nacos2:7848 has successfully established.

2025-01-08 03:38:46,781 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 03:38:46,781 INFO The channel nacos1:7848 has successfully established.

2025-01-08 03:38:46,781 INFO Peer nacos1:7848 is connected.

2025-01-08 03:38:46,781 INFO Peer nacos2:7848 is connected.

2025-01-08 03:38:46,785 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 03:38:46,785 INFO The channel nacos2:7848 has successfully established.

2025-01-08 03:38:46,785 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=12, granted=true.

2025-01-08 03:38:46,785 INFO Peer nacos2:7848 is connected.

2025-01-08 03:38:46,785 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=12.

2025-01-08 03:38:46,787 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=12, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2025-01-08 03:38:46,788 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 03:38:46,788 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 03:38:46,789 INFO The channel nacos1:7848 has successfully established.

2025-01-08 03:38:46,789 INFO Peer nacos1:7848 is connected.

2025-01-08 03:38:46,788 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=12, granted=true.

2025-01-08 03:38:46,789 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=12.

2025-01-08 03:38:46,789 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=12, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2025-01-08 03:38:46,790 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=13, votedFor=nacos3:7848, cost time=4 ms

2025-01-08 03:38:46,795 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=13, votedFor=nacos3:7848, cost time=5 ms

2025-01-08 03:38:46,795 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 03:38:46,797 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=13, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 03:38:46,798 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2025-01-08 03:38:46,798 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2025-01-08 03:38:46,804 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=13, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 03:38:46,804 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 03:38:46,804 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2025-01-08 03:38:46,805 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2025-01-08 03:38:46,805 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2025-01-08 03:38:46,805 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 03:38:46,813 INFO onLeaderStart: term=13.

2025-01-08 03:38:46,816 INFO onLeaderStart: term=13.

2025-01-08 03:38:47,442 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 03:38:47,827 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 03:38:49,624 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=12, currTerm=11, granted=true, requestLastLogId=LogId [index=11, term=11], lastLogId=LogId [index=11, term=11].

2025-01-08 03:38:49,627 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=12, currTerm=11.

2025-01-08 03:38:49,693 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=12, votedFor=0.0.0.0:0, cost time=65 ms

2025-01-08 03:38:49,697 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=12, votedFor=nacos1:7848, cost time=3 ms

2025-01-08 03:55:02,722 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_13.

2025-01-08 03:55:02,722 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_13.

2025-01-08 03:55:02,723 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_12.

2025-01-08 03:55:02,726 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 13 to 13, cost 0 ms.

2025-01-08 03:56:44,651 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 04:00:07,118 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_13.

2025-01-08 04:00:07,119 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_13.

2025-01-08 04:00:07,120 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_12.

2025-01-08 04:00:07,123 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 13 to 13, cost 0 ms.

2025-01-08 04:02:37,496 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_12.

2025-01-08 04:02:37,496 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_12.

2025-01-08 04:02:37,497 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_11.

2025-01-08 04:02:37,501 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 12 to 12, cost 0 ms.

2025-01-08 04:08:41,599 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 04:08:41,600 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 04:08:51,778 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 04:08:51,779 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 04:08:51,789 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 04:08:51,790 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 04:22:00,317 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499995837s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service_v2

2025-01-08 04:22:02,054 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=13, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2025-01-08 04:22:02,880 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=13, lastLogIncluded=0, lastLogIndex=13, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=9, type=Follower] is going to quit

2025-01-08 04:22:02,877 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499986997s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 04:22:02,880 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=13, lastLogIncluded=0, lastLogIndex=13, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=10, type=Follower] is going to quit

2025-01-08 04:22:02,880 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2025-01-08 04:22:02,889 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 04:22:02,892 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 04:22:02,896 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 04:22:04,039 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=14, currTerm=13, granted=true, requestLastLogId=LogId [index=13, term=13], lastLogId=LogId [index=13, term=13].

2025-01-08 04:22:04,043 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=14, currTerm=13.

2025-01-08 04:22:04,047 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=14, votedFor=0.0.0.0:0, cost time=4 ms

2025-01-08 04:22:04,050 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=14, votedFor=nacos2:7848, cost time=3 ms

2025-01-08 04:25:02,717 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 13 to 14, cost 0 ms.

2025-01-08 04:26:44,651 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 04:30:07,118 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_14.

2025-01-08 04:30:07,118 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_14.

2025-01-08 04:30:07,119 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_13.

2025-01-08 04:30:07,122 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 13 to 14, cost 0 ms.

2025-01-08 04:32:37,492 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 12 to 13, cost 0 ms.

2025-01-08 04:52:02,876 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 04:52:02,877 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 04:55:02,717 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 0 ms.

2025-01-08 04:56:44,652 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 05:00:07,113 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 14 to 15, cost 0 ms.

2025-01-08 05:02:37,491 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 1 ms.

2025-01-08 05:25:02,717 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 0 ms.

2025-01-08 05:26:44,652 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 05:26:51,597 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499989030s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service_v2

2025-01-08 05:30:07,113 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 15 to 15, cost 0 ms.

2025-01-08 05:32:37,492 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 05:55:02,718 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 0 ms.

2025-01-08 05:56:44,652 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 06:00:07,114 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 15 to 15, cost 1 ms.

2025-01-08 06:02:37,493 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 1 ms.

2025-01-08 06:25:02,718 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 0 ms.

2025-01-08 06:26:44,654 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 06:30:07,114 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 15 to 15, cost 0 ms.

2025-01-08 06:32:37,494 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 06:55:02,720 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 0 ms.

2025-01-08 06:56:44,653 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 1 ms.

2025-01-08 07:00:07,115 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 15 to 15, cost 0 ms.

2025-01-08 07:02:37,493 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 07:25:02,719 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 1 ms.

2025-01-08 07:26:44,654 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 07:30:07,115 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 15 to 15, cost 1 ms.

2025-01-08 07:32:37,494 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 07:55:02,720 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 0 ms.

2025-01-08 07:56:44,655 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 1 ms.

2025-01-08 07:58:14,707 INFO Node <naming_persistent_service/nacos3:7848> term 14 start preVote.

2025-01-08 07:58:14,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=14, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2025-01-08 07:58:14,757 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 07:58:14,708 INFO Node <naming_instance_metadata/nacos3:7848> term 13 start preVote.

2025-01-08 07:58:14,758 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 07:58:14,758 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 07:58:14,760 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 07:58:14,708 INFO Node <naming_service_metadata/nacos3:7848> term 12 start preVote.

2025-01-08 07:58:14,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=13, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2025-01-08 07:58:14,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=12, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2025-01-08 07:58:14,764 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 07:58:14,708 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=13, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2025-01-08 07:58:14,765 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=13, lastLogIncluded=0, lastLogIndex=13, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=10, type=Follower] is going to quit

2025-01-08 07:58:14,765 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=13, lastLogIncluded=0, lastLogIndex=13, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=9, type=Follower] is going to quit

2025-01-08 07:58:14,765 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2025-01-08 07:58:14,772 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 07:58:14,772 INFO The channel nacos2:7848 has successfully established.

2025-01-08 07:58:14,772 INFO Peer nacos2:7848 is connected.

2025-01-08 07:58:14,775 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 07:58:14,775 INFO The channel nacos2:7848 has successfully established.

2025-01-08 07:58:14,777 INFO Peer nacos2:7848 is connected.

2025-01-08 07:58:14,778 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=14, currTerm=13, granted=true, requestLastLogId=LogId [index=13, term=13], lastLogId=LogId [index=13, term=13].

2025-01-08 07:58:14,779 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=13, granted=true.

2025-01-08 07:58:14,779 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=13.

2025-01-08 07:58:14,779 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 07:58:14,784 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=14, currTerm=13.

2025-01-08 07:58:14,787 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 07:58:14,790 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 07:58:14,790 INFO The channel nacos1:7848 has successfully established.

2025-01-08 07:58:14,792 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 07:58:14,792 INFO The channel nacos1:7848 has successfully established.

2025-01-08 07:58:14,793 INFO Peer nacos1:7848 is connected.

2025-01-08 07:58:14,793 INFO Peer nacos1:7848 is connected.

2025-01-08 07:58:14,793 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=14, votedFor=nacos3:7848, cost time=8 ms

2025-01-08 07:58:14,795 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=13, currTerm=14.

2025-01-08 07:58:14,795 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=13, currTerm=14.

2025-01-08 07:58:14,795 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 07:58:14,795 INFO The channel nacos2:7848 has successfully established.

2025-01-08 07:58:14,796 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=14, votedFor=0.0.0.0:0, cost time=11 ms

2025-01-08 07:58:14,796 INFO Peer nacos2:7848 is connected.

2025-01-08 07:58:14,798 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=14, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 07:58:14,799 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 07:58:14,799 INFO The channel nacos1:7848 has successfully established.

2025-01-08 07:58:14,799 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2025-01-08 07:58:14,799 INFO Peer nacos1:7848 is connected.

2025-01-08 07:58:14,799 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=14, votedFor=nacos1:7848, cost time=3 ms

2025-01-08 07:58:14,800 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2025-01-08 07:58:14,808 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=14, granted=true.

2025-01-08 07:58:14,808 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=14.

2025-01-08 07:58:14,808 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=14, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2025-01-08 07:58:14,809 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=12, granted=false.

2025-01-08 07:58:14,811 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2025-01-08 07:58:14,811 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 07:58:14,812 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=12, granted=false.

2025-01-08 07:58:14,813 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=15, votedFor=nacos3:7848, cost time=4 ms

2025-01-08 07:58:14,815 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 07:58:14,820 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=15, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 07:58:14,821 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2025-01-08 07:58:14,821 INFO onLeaderStart: term=14.

2025-01-08 07:58:14,821 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2025-01-08 07:58:14,822 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 07:58:14,829 INFO onLeaderStart: term=15.

2025-01-08 08:00:07,119 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_15.

2025-01-08 08:00:07,119 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_15.

2025-01-08 08:00:07,119 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_14.

2025-01-08 08:00:07,121 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 15 to 15, cost 0 ms.

2025-01-08 08:02:37,494 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 08:19:51,586 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499994266s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_instance_metadata

2025-01-08 08:25:02,725 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_14.

2025-01-08 08:25:02,725 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_14.

2025-01-08 08:25:02,726 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_13.

2025-01-08 08:25:02,783 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 14, cost 0 ms.

2025-01-08 08:26:44,660 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_14.

2025-01-08 08:26:44,660 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_14.

2025-01-08 08:26:44,661 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_13.

2025-01-08 08:26:44,664 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 14, cost 1 ms.

2025-01-08 08:28:06,678 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 08:28:14,719 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 08:28:14,761 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 08:28:14,807 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 08:28:14,810 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 08:28:19,766 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 08:28:19,766 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 08:30:07,116 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 15 to 16, cost 0 ms.

2025-01-08 08:32:37,494 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 1 ms.

2025-01-08 08:41:28,780 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499989663s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_instance_metadata

2025-01-08 08:55:02,721 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 14 to 15, cost 1 ms.

2025-01-08 08:56:44,657 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 14 to 15, cost 1 ms.

2025-01-08 09:00:07,116 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 16 to 16, cost 0 ms.

2025-01-08 09:02:37,495 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 0 ms.

2025-01-08 09:24:44,913 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499990836s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 09:24:44,915 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499998622s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 09:24:45,289 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=15, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2025-01-08 09:24:45,290 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=15, lastLogIncluded=0, lastLogIndex=15, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=12, type=Follower] is going to quit

2025-01-08 09:24:45,291 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=15, lastLogIncluded=0, lastLogIndex=15, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=11, type=Follower] is going to quit

2025-01-08 09:24:45,291 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2025-01-08 09:24:45,435 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 09:24:45,833 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 09:24:46,576 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 09:24:46,817 INFO Node <naming_service_metadata/nacos3:7848> term 12 start preVote.

2025-01-08 09:24:46,818 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=12, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2025-01-08 09:24:46,818 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 09:24:46,819 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 09:24:46,826 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 09:24:46,826 INFO The channel nacos2:7848 has successfully established.

2025-01-08 09:24:46,827 INFO Peer nacos2:7848 is connected.

2025-01-08 09:24:46,827 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 09:24:46,827 INFO The channel nacos1:7848 has successfully established.

2025-01-08 09:24:46,827 INFO Peer nacos1:7848 is connected.

2025-01-08 09:24:46,830 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=12, granted=true.

2025-01-08 09:24:46,830 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=12.

2025-01-08 09:24:46,895 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=13, votedFor=nacos3:7848, cost time=64 ms

2025-01-08 09:24:46,895 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 09:24:46,900 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=13, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 09:24:46,900 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2025-01-08 09:24:46,900 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2025-01-08 09:24:46,901 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 09:24:46,919 INFO onLeaderStart: term=13.

2025-01-08 09:24:50,521 INFO Node <naming_persistent_service/nacos3:7848> term 15 start preVote.

2025-01-08 09:24:50,525 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=15, granted=true.

2025-01-08 09:24:50,525 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=15.

2025-01-08 09:24:50,529 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=16, votedFor=nacos3:7848, cost time=3 ms

2025-01-08 09:24:50,529 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 09:24:50,535 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=16, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 09:24:50,535 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2025-01-08 09:24:50,536 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2025-01-08 09:24:50,536 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 09:24:50,543 INFO onLeaderStart: term=16.

2025-01-08 09:25:02,722 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 15 to 15, cost 0 ms.

2025-01-08 09:26:44,657 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 15 to 15, cost 0 ms.

2025-01-08 09:30:07,139 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_16.

2025-01-08 09:30:07,139 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_16.

2025-01-08 09:30:07,140 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_15.

2025-01-08 09:30:07,143 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 16 to 16, cost 0 ms.

2025-01-08 09:32:37,500 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_13.

2025-01-08 09:32:37,500 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_13.

2025-01-08 09:32:37,501 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_12.

2025-01-08 09:32:37,559 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 13, cost 1 ms.

2025-01-08 09:54:49,914 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 09:54:49,915 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 09:55:02,722 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 15 to 15, cost 0 ms.

2025-01-08 09:56:44,658 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 15 to 15, cost 0 ms.

2025-01-08 10:00:07,117 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 16 to 17, cost 0 ms.

2025-01-08 10:02:37,496 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 13 to 14, cost 0 ms.

2025-01-08 10:07:58,199 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499991058s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_instance_metadata

2025-01-08 10:07:58,286 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499989831s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 10:07:58,287 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499997493s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_service_metadata

2025-01-08 10:08:02,153 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=17, currTerm=16, because the leader nacos3:7848's lease is still valid.

2025-01-08 10:08:02,410 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=15, currTerm=14, granted=true, requestLastLogId=LogId [index=14, term=14], lastLogId=LogId [index=14, term=14].

2025-01-08 10:08:02,415 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=15, currTerm=14.

2025-01-08 10:08:02,416 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=14, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2025-01-08 10:08:02,418 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=15, votedFor=0.0.0.0:0, cost time=2 ms

2025-01-08 10:08:02,420 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=15, votedFor=nacos2:7848, cost time=3 ms

2025-01-08 10:08:04,467 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 10:08:04,475 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 10:08:04,476 INFO The channel nacos2:7848 has successfully established.

2025-01-08 10:25:02,727 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_15.

2025-01-08 10:25:02,727 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_15.

2025-01-08 10:25:02,728 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_14.

2025-01-08 10:25:02,746 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 15 to 15, cost 0 ms.

2025-01-08 10:26:44,718 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 15 to 15, cost 0 ms.

2025-01-08 10:30:07,228 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 17 to 17, cost 0 ms.

2025-01-08 10:32:37,516 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 10:38:02,132 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 10:38:07,122 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 10:38:07,155 INFO Connection disconnected: /172.19.0.4:60888

2025-01-08 10:51:15,156 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499986849s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 10:51:15,156 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499997320s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_service_metadata

2025-01-08 10:51:16,662 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499997382s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_instance_metadata

2025-01-08 10:51:19,332 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=14, currTerm=13, because the leader nacos3:7848's lease is still valid.

2025-01-08 10:51:22,325 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=16, currTerm=15, because the leader nacos2:7848's lease is still valid.

2025-01-08 10:51:22,325 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=16, currTerm=15.

2025-01-08 10:51:22,325 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=15, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2025-01-08 10:51:22,334 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=16, votedFor=0.0.0.0:0, cost time=10 ms

2025-01-08 10:51:22,390 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=16, votedFor=nacos1:7848, cost time=55 ms

2025-01-08 10:51:27,647 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 10:51:27,657 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 10:51:27,658 INFO The channel nacos1:7848 has successfully established.

2025-01-08 10:55:02,728 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_16.

2025-01-08 10:55:02,729 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_16.

2025-01-08 10:55:02,733 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_15.

2025-01-08 10:55:02,735 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 15 to 16, cost 0 ms.

2025-01-08 10:56:44,681 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 15 to 15, cost 0 ms.

2025-01-08 11:00:07,316 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 17 to 17, cost 0 ms.

2025-01-08 11:02:37,513 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 11:21:20,517 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 11:21:24,303 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 11:21:24,333 INFO Connection disconnected: /172.19.0.3:39110

2025-01-08 11:25:02,740 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 16 to 17, cost 1 ms.

2025-01-08 11:26:44,674 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 15 to 15, cost 1 ms.

2025-01-08 11:30:07,135 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 17 to 17, cost 0 ms.

2025-01-08 11:32:37,510 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 14 to 14, cost 0 ms.

2025-01-08 11:34:30,137 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=13, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2025-01-08 11:34:30,391 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499991375s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_service_metadata

2025-01-08 11:34:30,391 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2025-01-08 11:34:30,392 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499991150s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_instance_metadata

2025-01-08 11:34:30,392 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=13, lastLogIncluded=0, lastLogIndex=13, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=10, type=Follower] is going to quit

2025-01-08 11:34:30,392 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=13, lastLogIncluded=0, lastLogIndex=13, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=11, type=Follower] is going to quit

2025-01-08 11:34:30,394 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499996983s. Name resolution delay 0.000000000 seconds. [closed=[CANCELLED], committed=[remote_addr=nacos2/172.19.0.3:7848]]], groupId=naming_persistent_service

2025-01-08 11:34:30,396 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499987272s. Name resolution delay 0.000000000 seconds. [closed=[CANCELLED], committed=[remote_addr=nacos2/172.19.0.3:7848]]], groupId=naming_instance_metadata

2025-01-08 11:34:30,397 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499991434s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 11:34:30,405 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=17, currTerm=16, granted=true, requestLastLogId=LogId [index=16, term=16], lastLogId=LogId [index=16, term=16].

2025-01-08 11:34:30,409 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 11:34:30,410 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=17, currTerm=16.

2025-01-08 11:34:30,410 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 11:34:30,411 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2025-01-08 11:34:30,416 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=17, votedFor=0.0.0.0:0, cost time=4 ms

2025-01-08 11:34:30,416 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=16, lastLogIncluded=0, lastLogIndex=16, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=13, type=Follower] is going to quit

2025-01-08 11:34:30,416 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=16, lastLogIncluded=0, lastLogIndex=16, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=14, type=Follower] is going to quit

2025-01-08 11:34:30,418 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=17, votedFor=nacos2:7848, cost time=3 ms

2025-01-08 11:34:30,600 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 11:34:31,710 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=14, currTerm=13, granted=true, requestLastLogId=LogId [index=13, term=13], lastLogId=LogId [index=13, term=13].

2025-01-08 11:34:31,712 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=14, currTerm=13.

2025-01-08 11:34:31,716 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=14, votedFor=0.0.0.0:0, cost time=4 ms

2025-01-08 11:34:31,719 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=14, votedFor=nacos1:7848, cost time=3 ms

2025-01-08 11:34:38,083 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 11:34:38,091 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 11:34:38,091 INFO The channel nacos2:7848 has successfully established.

2025-01-08 11:55:02,743 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 17 to 17, cost 0 ms.

2025-01-08 11:56:08,617 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=14, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2025-01-08 11:56:10,096 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=14, lastLogIncluded=0, lastLogIndex=14, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=12, type=Follower] is going to quit

2025-01-08 11:56:09,609 INFO Node <naming_service_metadata/nacos3:7848> term 14 start preVote.

2025-01-08 11:56:10,100 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=14, lastLogIncluded=0, lastLogIndex=14, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=11, type=Follower] is going to quit

2025-01-08 11:56:09,609 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=14, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2025-01-08 11:56:09,943 INFO Node <naming_persistent_service/nacos3:7848> term 17 start preVote.

2025-01-08 11:56:10,098 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2025-01-08 11:56:09,943 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=17, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2025-01-08 11:56:10,126 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=14, granted=true.

2025-01-08 11:56:10,126 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=14.

2025-01-08 11:56:10,126 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=14, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2025-01-08 11:56:10,136 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=15, votedFor=nacos3:7848, cost time=9 ms

2025-01-08 11:56:10,136 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 11:56:10,139 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=17, granted=true.

2025-01-08 11:56:10,139 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=17.

2025-01-08 11:56:10,139 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=18, currTerm=18, granted=true, requestLastLogId=LogId [index=17, term=17], lastLogId=LogId [index=17, term=17].

2025-01-08 11:56:10,139 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=15, currTerm=15, granted=true, requestLastLogId=LogId [index=14, term=14], lastLogId=LogId [index=14, term=14].

2025-01-08 11:56:10,149 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=18, votedFor=nacos3:7848, cost time=8 ms

2025-01-08 11:56:10,153 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=15, currTerm=14, granted=true, requestLastLogId=LogId [index=14, term=14], lastLogId=LogId [index=14, term=14].

2025-01-08 11:56:10,155 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=18, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 11:56:10,155 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=15, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 11:56:10,155 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2025-01-08 11:56:10,155 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2025-01-08 11:56:10,156 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2025-01-08 11:56:10,156 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2025-01-08 11:56:10,160 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2025-01-08 11:56:10,161 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2025-01-08 11:56:10,166 INFO onLeaderStart: term=18.

2025-01-08 11:56:10,167 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2025-01-08 11:56:10,168 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=17, currTerm=16, because the leader nacos1:7848's lease is still valid.

2025-01-08 11:56:10,174 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 11:56:10,174 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=15, currTerm=14.

2025-01-08 11:56:10,176 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=17, currTerm=16.

2025-01-08 11:56:10,179 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=16, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2025-01-08 11:56:10,179 INFO onLeaderStart: term=15.

2025-01-08 11:56:10,183 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=17, votedFor=0.0.0.0:0, cost time=5 ms

2025-01-08 11:56:10,185 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 11:56:10,186 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=15, votedFor=0.0.0.0:0, cost time=9 ms

2025-01-08 11:56:10,188 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=17, votedFor=nacos2:7848, cost time=4 ms

2025-01-08 11:56:10,189 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=15, votedFor=nacos2:7848, cost time=2 ms

2025-01-08 11:56:44,664 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_15.

2025-01-08 11:56:44,664 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_15.

2025-01-08 11:56:44,665 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_14.

2025-01-08 11:56:44,668 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 15 to 15, cost 0 ms.

2025-01-08 12:00:07,127 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_18.

2025-01-08 12:00:07,127 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_18.

2025-01-08 12:00:07,128 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_16.

2025-01-08 12:00:07,131 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 17 to 17, cost 0 ms.

2025-01-08 12:02:37,503 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_15.

2025-01-08 12:02:37,503 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_15.

2025-01-08 12:02:37,504 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_13.

2025-01-08 12:02:37,561 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 14 to 14, cost 1 ms.

2025-01-08 12:25:02,730 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_17.

2025-01-08 12:25:02,730 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_17.

2025-01-08 12:25:02,730 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_16.

2025-01-08 12:25:02,789 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 17 to 17, cost 0 ms.

2025-01-08 12:26:07,399 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 12:26:07,399 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 12:26:07,400 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 12:26:10,097 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 12:26:10,109 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 12:26:10,138 INFO The channel nacos1:7848 is in state: IDLE.

2025-01-08 12:26:11,402 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 12:26:11,403 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2025-01-08 12:26:15,145 INFO Connection disconnected: /172.19.0.4:35124

2025-01-08 12:26:15,146 INFO Connection disconnected: /172.19.0.3:34070

2025-01-08 12:26:44,661 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 15 to 16, cost 0 ms.

2025-01-08 12:30:07,130 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 17 to 19, cost 0 ms.

2025-01-08 12:32:37,521 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 14 to 16, cost 0 ms.

2025-01-08 12:55:02,747 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 17 to 18, cost 1 ms.

2025-01-08 12:56:44,681 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 16 to 16, cost 1 ms.

2025-01-08 13:00:07,121 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 0 ms.

2025-01-08 13:00:58,837 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499997544s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_service_metadata

2025-01-08 13:00:59,330 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499994005s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 13:02:37,515 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 13:22:34,650 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499997178s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 13:22:37,114 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499996762s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_service_metadata

2025-01-08 13:22:37,119 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499990406s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 13:25:02,738 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 18 to 18, cost 0 ms.

2025-01-08 13:26:44,673 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 16 to 16, cost 1 ms.

2025-01-08 13:30:07,122 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 0 ms.

2025-01-08 13:32:37,517 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 13:55:02,789 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 18 to 18, cost 0 ms.

2025-01-08 13:56:45,636 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 14:00:07,161 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 1 ms.

2025-01-08 14:02:37,505 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 14:05:53,461 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499991444s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 14:25:02,739 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 18 to 18, cost 0 ms.

2025-01-08 14:26:44,674 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 14:27:29,333 INFO Node <naming_instance_metadata/nacos3:7848> term 15 start preVote.

2025-01-08 14:27:29,333 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=15, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2025-01-08 14:27:30,157 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499993846s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 14:27:30,176 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 14:27:30,177 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 14:27:30,178 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499996444s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 14:27:30,194 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=16, currTerm=15, because the leader nacos3:7848's lease is still valid.

2025-01-08 14:27:30,195 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 14:27:30,195 INFO The channel nacos1:7848 has successfully established.

2025-01-08 14:27:30,195 INFO Peer nacos1:7848 is connected.

2025-01-08 14:27:30,196 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 14:27:30,196 INFO The channel nacos2:7848 has successfully established.

2025-01-08 14:27:30,196 INFO Peer nacos2:7848 is connected.

2025-01-08 14:27:30,200 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=15, granted=true.

2025-01-08 14:27:30,200 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=15.

2025-01-08 14:27:30,200 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=15, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2025-01-08 14:27:30,202 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=16, votedFor=nacos3:7848, cost time=2 ms

2025-01-08 14:27:30,202 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 14:27:30,206 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=16, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 14:27:30,207 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2025-01-08 14:27:30,207 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2025-01-08 14:27:30,211 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 14:27:30,214 INFO onLeaderStart: term=16.

2025-01-08 14:30:07,140 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 1 ms.

2025-01-08 14:32:37,511 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 14:49:08,634 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499996658s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_instance_metadata

2025-01-08 14:55:02,749 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 18 to 18, cost 0 ms.

2025-01-08 14:56:44,668 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_16.

2025-01-08 14:56:44,668 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_16.

2025-01-08 14:56:44,669 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_15.

2025-01-08 14:56:44,692 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 14:57:35,186 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 14:57:35,187 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 14:57:35,197 INFO Connection disconnected: /172.19.0.4:35200

2025-01-08 15:00:07,142 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 0 ms.

2025-01-08 15:02:37,523 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 15:10:42,924 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499988998s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 15:10:43,428 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499990032s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_instance_metadata

2025-01-08 15:10:43,494 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499994039s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_service_metadata

2025-01-08 15:10:46,118 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=18, currTerm=17, because the leader nacos2:7848's lease is still valid.

2025-01-08 15:10:46,118 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=18, currTerm=17.

2025-01-08 15:10:46,119 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=17, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2025-01-08 15:10:46,120 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=18, votedFor=0.0.0.0:0, cost time=1 ms

2025-01-08 15:10:46,122 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=18, votedFor=nacos1:7848, cost time=1 ms

2025-01-08 15:10:49,671 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 15:10:49,678 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 15:10:49,678 INFO The channel nacos1:7848 has successfully established.

2025-01-08 15:25:02,964 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_18.

2025-01-08 15:25:02,965 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_18.

2025-01-08 15:25:02,965 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_17.

2025-01-08 15:25:04,341 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 18 to 18, cost 0 ms.

2025-01-08 15:26:44,668 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 16 to 17, cost 0 ms.

2025-01-08 15:30:07,128 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 0 ms.

2025-01-08 15:32:22,856 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499993148s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_persistent_service

2025-01-08 15:32:22,856 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499988865s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_service_metadata

2025-01-08 15:32:22,856 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499997618s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos2/172.19.0.3:7848]]]], groupId=naming_instance_metadata

2025-01-08 15:32:37,510 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 15:40:42,540 INFO The channel nacos2:7848 is in state: IDLE.

2025-01-08 15:40:50,947 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2025-01-08 15:55:02,746 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 18 to 19, cost 1 ms.

2025-01-08 15:56:44,685 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 17 to 17, cost 1 ms.

2025-01-08 16:00:07,134 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 0 ms.

2025-01-08 16:02:37,515 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 16:25:02,735 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 19 to 19, cost 0 ms.

2025-01-08 16:26:44,679 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 17 to 17, cost 0 ms.

2025-01-08 16:30:07,129 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 0 ms.

2025-01-08 16:32:37,520 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

2025-01-08 16:55:02,729 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 19 to 19, cost 0 ms.

2025-01-08 16:56:44,685 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 17 to 17, cost 0 ms.

2025-01-08 16:58:52,228 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499987325s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_service_metadata

2025-01-08 16:58:52,229 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499993012s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_persistent_service

2025-01-08 16:58:52,229 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: CallOptions deadline exceeded after 2.499997590s. Name resolution delay 0.000000000 seconds. [closed=[], open=[[remote_addr=nacos1/172.19.0.4:7848]]]], groupId=naming_instance_metadata

2025-01-08 16:58:56,216 INFO Node <naming_persistent_service_v2/nacos3:7848> term 18 start preVote.

2025-01-08 16:58:56,217 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=18, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2025-01-08 16:58:56,813 INFO The channel nacos2:7848 is in state: CONNECTING.

2025-01-08 16:58:56,815 INFO The channel nacos1:7848 is in state: CONNECTING.

2025-01-08 16:58:56,825 INFO The channel nacos1:7848 is in state: READY.

2025-01-08 16:58:56,826 INFO The channel nacos1:7848 has successfully established.

2025-01-08 16:58:56,827 INFO Peer nacos1:7848 is connected.

2025-01-08 16:58:56,828 INFO The channel nacos2:7848 is in state: READY.

2025-01-08 16:58:56,829 INFO The channel nacos2:7848 has successfully established.

2025-01-08 16:58:56,829 INFO Peer nacos2:7848 is connected.

2025-01-08 16:58:56,836 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=18, granted=true.

2025-01-08 16:58:56,836 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=18.

2025-01-08 16:58:56,872 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=19, currTerm=18, because the leader nacos3:7848's lease is still valid.

2025-01-08 16:58:57,421 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=19, votedFor=nacos3:7848, cost time=582 ms

2025-01-08 16:58:57,421 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2025-01-08 16:58:57,422 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=19, currTerm=19, granted=true, requestLastLogId=LogId [index=18, term=18], lastLogId=LogId [index=18, term=18].

2025-01-08 16:58:57,427 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=19, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2025-01-08 16:58:57,428 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2025-01-08 16:58:57,429 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2025-01-08 16:58:57,431 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2025-01-08 16:58:57,451 INFO onLeaderStart: term=19.

2025-01-08 17:00:07,145 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 19 to 19, cost 0 ms.

2025-01-08 17:02:37,511 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 16 to 16, cost 0 ms.

